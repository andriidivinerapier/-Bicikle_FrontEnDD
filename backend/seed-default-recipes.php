<?php
// seed-default-recipes.php — завантажує вбудовані рецепти у БД

require 'db.php';

// Перевірка чи рецепти вже існують
$result = $conn->query("SELECT COUNT(*) as count FROM recipes WHERE user_id IS NULL");
$row = $result->fetch_assoc();

if ($row['count'] > 0) {
    echo json_encode(['status' => 'success', 'message' => 'Рецепти вже завантажені']);
    exit;
}

// Всі рецепти
$recipes = [
    // Середземноморська паста з креветками (hero)
    [
        'title' => 'Середземноморська паста з креветками',
        'category' => 'Основні',
        'difficulty' => 'Середня',
        'cooking_time' => 30,
        'ingredients' => 'Спагетті - 300г|Креветки (очищені) - 300г|Помідори чері - 200г|Оливкова олія - 2 ст.л.|Часник - 2 зубчики|Біле вино - 50мл (опц.)|Лимон (цедра + сік) - 1 шт|Базилік - жменя|Петрушка - 1-2 ст.л.|Чілі пластівці - за смаком|Сіль, перець - за смаком|Пармезан - для подачі',
        'instructions' => 'Доведіть до кипіння велику каструлю підсоленої води і відваріть спагетті al dente.|У великій сковороді розігрійте оливкову олію, додайте часник і обсмажуйте до аромату.|Додайте креветки, посоліть і обсмажуйте по 1-2 хвилини з кожного боку, потім відкладіть.|У сковороду додайте помідори чері і смажте 3-4 хвилини, за бажанням влийте біле вино і дайте випаруватися.|Поверніть креветки, додайте відварені спагетті і трохи води від варіння, перемішайте, щоб утворився соус.|Додайте лимонну цедру і сік, половину базиліку і петрушки, приправте за смаком і швидко прогрійте.|Подавайте одразу, посипавши тертим пармезаном і рештою свіжих трав.',
        'image_path' => 'images/homepage/mediterranean-pasta.jpg',
        'status' => 'approved'
    ],
    // Вегетаріанські страви
    [
        'title' => 'Будда-боул',
        'category' => 'Вегетаріанські',
        'difficulty' => 'Легка',
        'cooking_time' => 25,
        'ingredients' => 'Кіноа - 100г|Морква - 1 шт|Соєвий соус - 2 ст.л.|Нут варений - 200г|Броколі - 200г|Кунжутна олія - 1 ст.л.|Авокадо - 1 шт|Шпинат - 50г',
        'instructions' => 'Приготуйте кіноа згідно інструкції на упаковці.|Поріжте овочі та обсмажте моркву і броколі на олії кілька хвилин.|Змішайте кіноа, овочі та нут, додайте соєвий соус і кунжутну олію.|Декоруйте скибочками авокадо та свіжим шпинатом. Подавайте теплою.',
        'image_path' => 'images/homepage/salad1.jpg',
        'status' => 'approved'
    ],
    [
        'title' => 'Грецький салат',
        'category' => 'Салати',
        'difficulty' => 'Легка',
        'cooking_time' => 15,
        'ingredients' => 'Помідори чері - 150г|Огірок - 1 шт|Фета - 100г|Чорні оливки - 50г|Цибуля - 1/2 шт|Оливкова олія - 1 ст.л.',
        'instructions' => 'Поріжте помідори, огірок і цибулю.|Покришите фету і додайте оливки.|Заправте оливковою олією, посоліть, поперчіть і перемішайте.|Подавайте відразу.',
        'image_path' => 'images/homepage/salad2.jpg',
        'status' => 'approved'
    ],
    [
        'title' => 'Кіноа з овочами',
        'category' => 'Салати',
        'difficulty' => 'Середня',
        'cooking_time' => 30,
        'ingredients' => 'Кіноа - 120г|Помідори - 2 шт|Огірок - 1 шт|Перець - 1 шт|Зелень - за смаком|Лимонний сік - 1 ст.л.',
        'instructions' => 'Відваріть кіноа до готовності.|Поріжте овочі та змішайте з кіноа.|Полийте лимонним соком і додайте сіль, перець.|Подавайте кімнатної температури або охолодженим.',
        'image_path' => 'images/homepage/salad3.jpg',
        'status' => 'approved'
    ],
    [
        'title' => 'Овочеве рагу',
        'category' => 'Основні',
        'difficulty' => 'Середня',
        'cooking_time' => 45,
        'ingredients' => 'Баклажан - 1 шт|Кабачок - 1 шт|Перець - 1 шт|Помідори - 3 шт|Часник - 2 зубчики|Оливкова олія - 2 ст.л.',
        'instructions' => 'Наріжте овочі великими шматками.|Обсмажте часник на олії, додайте овочі і тушкуйте до м\'якості.|Посоліть, поперчіть і подавайте з улюбленими травами.',
        'image_path' => 'images/homepage/salad4.jpg',
        'status' => 'approved'
    ],
    // Пасти
    [
        'title' => 'Паста Карбонара',
        'category' => 'Основні',
        'difficulty' => 'Середня',
        'cooking_time' => 30,
        'ingredients' => 'Спагетті - 200г|Яйця - 2 шт|Пармезан - 50г|Бекон - 100г|Чорний перець - за смаком',
        'instructions' => 'Відваріть спагетті аль денте.|Обсмажте бекон до хрусткості.|Змішайте яйця з тертим пармезаном, додайте до пасти поза вогнем.|Додайте бекон і щедро поперчіть.',
        'image_path' => 'images/homepage/pasta1.jpg',
        'status' => 'approved'
    ],
    [
        'title' => 'Спагетті Болоньєзе',
        'category' => 'Основні',
        'difficulty' => 'Середня',
        'cooking_time' => 40,
        'ingredients' => 'Спагетті - 200г|Фарш - 300г|Томатний соус - 300мл|Цибуля - 1 шт|Часник - 2 зубчики|Олія - 1 ст.л.',
        'instructions' => 'Обсмажте цибулю та часник, додайте фарш і обсмажте.|Додайте томатний соус і тушкуйте 20-30 хв.|Подавайте з відвареними спагетті та тертим пармезаном.',
        'image_path' => 'images/homepage/pasta2.jpg',
        'status' => 'approved'
    ],
    [
        'title' => 'Пенне Арабіата',
        'category' => 'Основні',
        'difficulty' => 'Легка',
        'cooking_time' => 20,
        'ingredients' => 'Пенне - 200г|Томатний соус - 200мл|Часник - 2 зубчики|Перець чілі - за смаком|Оливкова олія - 1 ст.л.',
        'instructions' => 'Відваріть пенне до готовності.|Приготуйте гострий томатний соус з часником і перцем чілі.|Змішайте пасту з соусом і подавайте гарячою.',
        'image_path' => 'images/homepage/pasta3.jpg',
        'status' => 'approved'
    ],
    [
        'title' => 'Фетучіні Альфредо',
        'category' => 'Основні',
        'difficulty' => 'Середня',
        'cooking_time' => 25,
        'ingredients' => 'Фетучіні - 200г|Вершки - 200мл|Пармезан - 70г|Вершкове масло - 30г|Часник - 1 зубчик',
        'instructions' => 'Відваріть фетучіні до аль денте.|На сковороді розтопіть масло, додайте вершки і пармезан.|Змішайте пасту з соусом і подавайте одразу.',
        'image_path' => 'images/homepage/pasta4.jpg',
        'status' => 'approved'
    ],
    // Десерти
    [
        'title' => 'Тірамісу',
        'category' => 'Десерти',
        'difficulty' => 'Легка',
        'cooking_time' => 20,
        'ingredients' => 'Сир маскарпоне - 250г|Кава еспресо - 200мл|Печиво савоярді - 200г|Цукор - 80г|Какао для посипки',
        'instructions' => 'Збийте маскарпоне з цукром.|Змочіть печиво у каві і викладіть шари печива і крему.|Охолодіть мінімум 2 години, перед подачею посипте какао.',
        'image_path' => 'images/homepage/dessert1.jpg',
        'status' => 'approved'
    ],
    [
        'title' => 'Чізкейк',
        'category' => 'Десерти',
        'difficulty' => 'Середня',
        'cooking_time' => 60,
        'ingredients' => 'Крем-сир - 400г|Пісочна основа - 200г|Яйця - 2 шт|Цукор - 120г|Ягоди для прикраси',
        'instructions' => 'Змішайте крем-сир з цукром і яйцями.|Викладіть на пісочну основу і випікайте до готовності.|Охолодіть і прикрасьте ягодами перед подачею.',
        'image_path' => 'images/homepage/dessert2.jpg',
        'status' => 'approved'
    ],
    [
        'title' => 'Шоколадний фондан',
        'category' => 'Десерти',
        'difficulty' => 'Середня',
        'cooking_time' => 15,
        'ingredients' => 'Темний шоколад - 150г|Масло - 100г|Яйця - 3 шт|Цукор - 80г|Борошно - 30г',
        'instructions' => 'Розтопіть шоколад з маслом.|Збийте яйця з цукром, додайте шоколад і борошно.|Випікайте в маленьких формах 8-10 хвилин до рідкої серцевини.',
        'image_path' => 'images/homepage/dessert3.jpg',
        'status' => 'approved'
    ],
    [
        'title' => 'Яблучний штрудель',
        'category' => 'Десерти',
        'difficulty' => 'Легка',
        'cooking_time' => 45,
        'ingredients' => 'Яблука - 4 шт|Листовий дріжджовий лист - 1 упаковка|Цукор - 80г|Кориця - 1 ч.л.|Масло - 30г',
        'instructions' => 'Поріжте яблука і змішайте з цукром і корицею.|Викладіть начинку на тісто, загорніть і випікайте до золотистої скоринки.|Подавайте трохи охолодженим.',
        'image_path' => 'images/homepage/dessert4.jpg',
        'status' => 'approved'
    ],
    // Сніданки
    [
        'title' => 'Авокадо тост з яйцем пашот',
        'category' => 'Сніданки',
        'difficulty' => 'Середня',
        'cooking_time' => 15,
        'ingredients' => 'Хліб для тостів - 2 скибочки|Авокадо - 1 шт|Яйця - 2 шт|Помідори чері - 4-5 шт|Сіль та перець - за смаком|Оливкова олія - 1 ст.л.|Лимонний сік - 1 ч.л.|Мікрозелень - для подачі',
        'instructions' => 'Підсмажте хліб для тостів до золотистого кольору.|Розімніть м\'якоть авокадо виделкою, додайте сіль, перець і лимонний сік.|Приготуйте яйця пашот: закип\'ятіть воду з оцтом, зробіть воронку і варіть яйця 3 хвилини.|Розріжте помідори чері навпіл і злегка обсмажте на оливковій олії.|На тост викладіть пюре з авокадо, зверху - яйце пашот.|Прикрасьте смаженими помідорами і мікрозеленню, поперчіть.',
        'image_path' => 'images/breakfast/avocado-toast.jpg',
        'status' => 'approved'
    ],
    [
        'title' => 'Панкейки з ягодами',
        'category' => 'Сніданки',
        'difficulty' => 'Легка',
        'cooking_time' => 30,
        'ingredients' => 'Молоко - 500мл|Борошно - 250г|Яйця - 2 шт|Цукор - 2 ст.л.|Сіль - 1/4 ч.л.|Масло вершкове - 30г|Свіжі ягоди - 200г|Кленовий сироп - 100мл|Ванільний екстракт - 1/2 ч.л.',
        'instructions' => 'Змішайте молоко, яйця, розтоплене масло та ванільний екстракт.|Поступово додайте просіяне борошно з сіллю та цукром, збийте до однорідності.|Залиште тісто відпочити на 15-20 хвилин.|Розігрійте сковороду, змастіть маслом.|Випікайте млинці з обох боків до золотистого кольору.|Подавайте теплими зі свіжими ягодами та кленовим сиропом.',
        'image_path' => 'images/breakfast/pancakes.jpg',
        'status' => 'approved'
    ],
    [
        'title' => 'Чіа пудинг',
        'category' => 'Сніданки',
        'difficulty' => 'Легка',
        'cooking_time' => 10,
        'ingredients' => 'Насіння чіа - 4 ст.л.|Мигдальне молоко - 250мл|Мед або кленовий сироп - 2 ст.л.|Ванільний екстракт - 1/4 ч.л.|Свіжі фрукти (манго, ківі, ягоди) - 100г|Кокосова стружка - 2 ст.л.|Горіхи - 30г|Кориця - дрібка',
        'instructions' => 'Змішайте насіння чіа з мигдальним молоком, медом та ванільним екстрактом.|Добре перемішайте і залиште на 5 хвилин.|Перемішайте ще раз і поставте в холодильник на ніч.|Вранці перемішайте пудинг, за потреби додайте трохи молока.|Викладіть у склянки, прикрасьте нарізаними фруктами.|Посипте кокосовою стружкою, горіхами та корицею.',
        'image_path' => 'images/breakfast/chia-pudding.jpg',
        'status' => 'approved'
    ],
    // Супи
    [
        'title' => 'Куряча локшина',
        'category' => 'Супи',
        'difficulty' => 'Легка',
        'cooking_time' => 40,
        'ingredients' => 'Куряче філе - 400г|Морква - 2 шт|Цибуля - 1 шт|Локшина - 200г|Селера - 2 стебла|Часник - 2 зубчики|Лавровий лист - 2 шт|Чорний перець горошком - 5-6 шт|Зелень (петрушка, кріп) - пучок|Сіль - за смаком|Вода - 2.5л',
        'instructions' => 'Поставте воду закипати, додайте куряче філе, лавровий лист і перець.|Очистіть та наріжте моркву, цибулю та селеру.|Коли бульйон закипить, зніміть піну і варіть на повільному вогні 30 хвилин.|Дістаньте м\'ясо, наріжте кубиками.|У бульйон додайте овочі і варіть 10-15 хвилин.|Додайте локшину і варіть до готовності (5-7 хвилин).|Поверніть м\'ясо в суп, додайте дрібно нарізану зелень.|Посоліть за смаком і дайте настоятись 10 хвилин.',
        'image_path' => 'images/soups/chicken-noodle.jpg',
        'status' => 'approved'
    ],
    [
        'title' => 'Гарбузовий крем-суп',
        'category' => 'Супи',
        'difficulty' => 'Середня',
        'cooking_time' => 50,
        'ingredients' => 'Гарбуз (м\'якоть) - 800г|Цибуля - 1 шт|Часник - 3 зубчики|Морква - 1 шт|Картопля - 1 шт|Вершки (33%) - 200мл|Вершкове масло - 50г|Оливкова олія - 2 ст.л.|Мускатний горіх - дрібка|Імбир свіжий - 2 см|Карі - 1 ч.л.|Сіль, перець - за смаком|Гарбузове насіння - для подачі',
        'instructions' => 'Наріжте гарбуз кубиками та запікайте в духовці при 200°C 20-25 хвилин.|На олії та маслі обсмажте нарізані цибулю, часник та моркву до м\'якості.|Додайте картоплю, спеції та готуйте ще 5 хвилин.|Додайте запечений гарбуз та залийте гарячим овочевим бульйоном.|Варіть 15-20 хвилин до м\'якості картоплі.|Збийте все блендером до однорідності.|Додайте вершки, доведіть до кипіння.|Подавайте з гарбузовим насінням та краплею вершків.',
        'image_path' => 'images/soups/pumpkin-soup.jpg',
        'status' => 'approved'
    ],
    [
        'title' => 'Грибний суп',
        'category' => 'Супи',
        'difficulty' => 'Легка',
        'cooking_time' => 45,
        'ingredients' => 'Печериці свіжі - 400г|Білі гриби сушені - 30г|Картопля - 4 шт|Морква - 1 шт|Цибуля - 2 шт|Часник - 2 зубчики|Масло вершкове - 30г|Олія - 2 ст.л.|Сметана - 100г|Зелень петрушки - пучок|Лавровий лист - 2 шт|Чорний перець горошком - 5-6 шт|Сіль - за смаком|Вода - 2л',
        'instructions' => 'Замочіть сушені гриби в теплій воді на 30 хвилин.|На олії та маслі обсмажте нарізану цибулю до золотистого кольору.|Додайте натерту моркву та обсмажуйте ще 5 хвилин.|Наріжте та обсмажте печериці до золотистого кольору.|В каструлю покладіть нарізану картоплю, обсмажені овочі та гриби.|Додайте замочені гриби разом з процідженою водою.|Варіть 20-25 хвилин до готовності картоплі.|Наприкінці додайте часник, спеції та зелень.|Подавайте зі сметаною.',
        'image_path' => 'images/soups/mushroom-soup.jpg',
        'status' => 'approved'
    ],
    [
        'title' => 'Томатний суп',
        'category' => 'Супи',
        'difficulty' => 'Середня',
        'cooking_time' => 40,
        'ingredients' => 'Стиглі томати - 1 кг|Цибуля - 1 шт|Часник - 4 зубчики|Морква - 1 шт|Вершки (33%) - 200мл|Оливкова олія - 3 ст.л.|Базилік свіжий - великий пучок|Тимьян - 3-4 гілочки|Бальзамічний оцет - 1 ст.л.|Цукор - 1 ч.л.|Вершкове масло - 30г|Сіль, перець - за смаком|Грінки - для подачі',
        'instructions' => 'Розріжте томати навпіл, викладіть на деко з цибулею та часником.|Полийте оливковою олією, додайте тимьян, запікайте при 200°C 25-30 хв.|У каструлі обсмажте натерту моркву на маслі.|Додайте запечені овочі, очищені від шкірки томати.|Влийте бульйон, додайте цукор та варіть 10 хвилин.|Додайте базилік і збийте все блендером до однорідності.|Влийте вершки, додайте бальзамічний оцет.|Доведіть до кипіння і подавайте з грінками та листочками базиліка.',
        'image_path' => 'images/soups/tomato-soup.jpg',
        'status' => 'approved'
    ]
];

// Вставляємо рецепти
$inserted = 0;
foreach ($recipes as $recipe) {
    $stmt = $conn->prepare("
        INSERT INTO recipes (title, category, ingredients, instructions, image_path, difficulty, cooking_time, status, created_at)
        VALUES (?, ?, ?, ?, ?, ?, ?, ?, NOW())
    ");
    
    $stmt->bind_param(
        'ssssssis',
        $recipe['title'],
        $recipe['category'],
        $recipe['ingredients'],
        $recipe['instructions'],
        $recipe['image_path'],
        $recipe['difficulty'],
        $recipe['cooking_time'],
        $recipe['status']
    );
    
    if ($stmt->execute()) {
        $inserted++;
    } else {
        error_log("Error inserting recipe: " . $stmt->error);
    }
}

echo json_encode(['status' => 'success', 'message' => "Завантажено $inserted рецептів"]);
?>
